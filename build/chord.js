!function(t){var r={};function i(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=r,i.d=function(t,r,n){i.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,r){if(1&r&&(t=i(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var s in t)i.d(n,s,function(r){return t[r]}.bind(null,s));return n},i.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(r,"a",r),r},i.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},i.p="",i(i.s=0)}([function(t,r,i){"use strict";i.r(r);const n={medium:1,large:2,small:.9},s={fontSize:{normal:14},colors:{circleColor:{dark:"#FFFFFF",light:"#000000"},basisColor:{dark:"#795548",light:"#E5CE8C"},stringsColor:{dark:"#cddc39",light:"#6D5454"},rowDividerColor:{dark:"#000000",light:"#FFFFFF"},borderColor:{dark:"#FFFFFF",light:"#000000"},textColor:{dark:"#FFFFFF",light:"#000000"},backgroundColor:{dark:"#000000",light:"#FFFFFF"}}},e={getChordContainerStyleTag:(t,r)=>`<style>\n      .accord-description {\n          display: flex;\n          justify-content: space-between;\n          border: solid ${s.colors.borderColor[t]} 1px;\n          border-bottom: none;\n          font-size: ${s.fontSize.normal*r}px;\n          color: ${s.colors.textColor[t]};\n          background-color: ${s.colors.backgroundColor[t]};\n      }\n      .description-element {\n          display: inline-block;\n          width: 50%;\n          padding-top: 2px;\n          padding-left: 5px;\n      }\n          .row-number-container {\n          display: inline-block;\n          text-align: right;\n          padding-right: 13px;\n      }\n      .main-container {\n          width: auto;\n          display: inline-block;\n          margin: 20px;\n          color: ${s.colors.borderColor[t]};\n      }\n      .canvas-style {\n          border: solid ${s.colors.borderColor[t]} 1px;\n          border-top: none;\n      }\n  </style>`,getUnknownChordTemplateStyleTag:()=>"<style>\n      .unknown-chord {\n        display: inline-block;\n        margin: 20px;\n      }\n    </style"},a=[{id:"1",name:"F",startString:1,structure:{strings:{sixthString:[1],fifthString:[1,3],fourthString:[1,3],thirdString:[1,2],secondStrind:[1],firstString:[1]}}},{id:"2",name:"F7",startString:1,structure:{strings:{sixthString:[1],fifthString:[1,3],fourthString:[1],thirdString:[1,2],secondStrind:[1],firstString:[1]}}},{id:"3",name:"Fm",startString:1,structure:{strings:{sixthString:[1],fifthString:[1,3],fourthString:[1,3],thirdString:[1],secondStrind:[1],firstString:[1]}}},{id:"4",name:"C",startString:1,structure:{strings:{sixthString:[],fifthString:[3],fourthString:[2],thirdString:[],secondStrind:[1],firstString:[]}}},{id:"5",name:"C7",startString:1,structure:{strings:{sixthString:[],fifthString:[3],fourthString:[2],thirdString:[3],secondStrind:[1],firstString:[]}}},{id:"6",name:"Cm",startString:2,structure:{strings:{sixthString:[2],fifthString:[2],fourthString:[2,4],thirdString:[2,4],secondStrind:[2,3],firstString:[2]}}},{id:"7",name:"D",startString:1,structure:{strings:{sixthString:[],fifthString:[],fourthString:[],thirdString:[2],secondStrind:[3],firstString:[2]}}},{id:"8",name:"D7",startString:1,structure:{strings:{sixthString:[],fifthString:[],fourthString:[],thirdString:[2],secondStrind:[1],firstString:[2]}}},{id:"9",name:"Dm",startString:1,structure:{strings:{sixthString:[],fifthString:[],fourthString:[],thirdString:[2],secondStrind:[3],firstString:[1]}}},{id:"10",name:"E",startString:1,structure:{strings:{sixthString:[],fifthString:[2],fourthString:[2],thirdString:[1],secondStrind:[],firstString:[]}}},{id:"11",name:"E7",startString:1,structure:{strings:{sixthString:[],fifthString:[2],fourthString:[],thirdString:[1],secondStrind:[],firstString:[]}}},{id:"11",name:"Em",startString:1,structure:{strings:{sixthString:[],fifthString:[2],fourthString:[2],thirdString:[],secondStrind:[],firstString:[]}}},{id:"12",name:"G",startString:1,structure:{strings:{sixthString:[3],fifthString:[2],fourthString:[],thirdString:[],secondStrind:[],firstString:[3]}}},{id:"13",name:"G7",startString:1,structure:{strings:{sixthString:[3],fifthString:[2],fourthString:[],thirdString:[],secondStrind:[],firstString:[1]}}},{id:"14",name:"Gm",startString:2,structure:{strings:{sixthString:[2,5],fifthString:[2,5],fourthString:[2],thirdString:[2],secondStrind:[2],firstString:[2]}}},{id:"15",name:"A",startString:1,structure:{strings:{sixthString:[],fifthString:[],fourthString:[2],thirdString:[2],secondStrind:[2],firstString:[]}}},{id:"16",name:"A7",startString:1,structure:{strings:{sixthString:[],fifthString:[],fourthString:[2],thirdString:[],secondStrind:[2],firstString:[]}}},{id:"17",name:"Am",startString:1,structure:{strings:{sixthString:[],fifthString:[],fourthString:[2],thirdString:[2],secondStrind:[1],firstString:[]}}},{id:"18",name:"B",startString:2,structure:{strings:{sixthString:[2],fifthString:[2],fourthString:[2,4],thirdString:[2,4],secondStrind:[2,4],firstString:[2]}}},{id:"19",name:"Bm",startString:2,structure:{strings:{sixthString:[2],fifthString:[2],fourthString:[2,4],thirdString:[2,4],secondStrind:[2,3],firstString:[2]}}},{id:"20",name:"B7",startString:1,structure:{strings:{sixthString:[],fifthString:[2],fourthString:[1],thirdString:[2],secondStrind:[],firstString:[2]}}}];function o(){let t="-";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<5;i++)t+=r.charAt(Math.floor(Math.random()*r.length));return(new Date).getTime()+t}function c(t){return t.toLowerCase().split(/\s+|[,.]+/)}class h{constructor(t){this.componentRef=t}getChordsAttr(){return this.componentRef.getAttribute("chords")}getSizeAttr(){return this.componentRef.getAttribute("size")}getThemeAttr(){return this.componentRef.getAttribute("theme")}getReflectAttr(){return this.componentRef.getAttribute("reflect")}get reflect(){const t={horizontal:!1,vertical:!1},r=this.getReflectAttr()&&this.getReflectAttr().length?c(this.getReflectAttr()):"";return r&&r.map(r=>{"horizontal"!=r&&"x"!=r||(t.horizontal=!0),"vertical"!=r&&"y"!=r||(t.vertical=!0)}),t}get theme(){return this.getThemeAttr()&&"dark"==this.getThemeAttr().toLowerCase()?"dark":"light"}get size(){const t=this.getSizeAttr(),r=parseFloat(""+t);let i=n.medium;return i=isNaN(r)?n[t]?n[t]:n.medium:r}resolveChordNamesArray(){const t=this.getChordsAttr();let r=[];return t&&c(t).map(t=>{a.find(r=>r.name.toLowerCase()==t.toLowerCase())&&r.push(t.toLowerCase())}),r}get chordArray(){const t=[];return this.resolveChordNamesArray().map(r=>{a.map(i=>{i.name.toLowerCase()==r&&t.push({...i,componentCanvasId:`chord-${o()}`})})}),t}}class g{constructor(t,r,i){this.chordData=r,this.canvas={};const n={defaults:{canvasWidth:390,canvasHeight:140,rowWidth:30,stringHeight:20},ref:t,canvasSettings:{},customAttributes:i};n.canvasSettings={canvasHeight:n.defaults.canvasHeight*i.size,canvasWidth:n.defaults.canvasWidth*i.size,rowWidth:n.defaults.rowWidth*i.size,stringHeight:n.defaults.stringHeight*i.size},this.canvas=n,this.canvas.canvasSettings.canvasWidth=this.calculateCanvasSize(this.findBorders())}draw(){this.updateCanvasSize(),this.drawChord(),this.resolveChordReflection()}updateCanvasSize(){this.canvas.ref.canvas.setAttribute("height",this.canvas.canvasSettings.canvasHeight),this.canvas.ref.canvas.setAttribute("width",this.canvas.canvasSettings.canvasWidth)}drawBasis(){this.drawRectangle(s.colors.basisColor[this.canvas.customAttributes.theme],0,0,this.canvas.canvasSettings.canvasHeight,this.canvas.canvasSettings.canvasWidth);for(let t=1;t<=12;t++)this.drawALine(s.colors.rowDividerColor[this.canvas.customAttributes.theme],t*this.canvas.canvasSettings.rowWidth,0,t*this.canvas.canvasSettings.rowWidth,this.canvas.canvasSettings.canvasHeight);for(let t=0;t<=6;t++)this.drawALine(s.colors.stringsColor[this.canvas.customAttributes.theme],0,t*this.canvas.canvasSettings.stringHeight,this.canvas.canvasSettings.canvasWidth,t*this.canvas.canvasSettings.stringHeight)}drawRectangle(t,r,i,n,s){const e=this.canvas.ref.ctx;e&&(e.fillStyle=t,e.fillRect(i,r,s,n))}drawChord(){let t=this.canvas.canvasSettings.stringHeight;const r=[],i=s.colors.circleColor[this.canvas.customAttributes.theme];this.drawBasis();for(const n in this.chordData.structure.strings)this.chordData.structure.strings.hasOwnProperty(n)&&(this.chordData.structure.strings[n].forEach(n=>{r.push(n),this.drawCircle(5*this.canvas.customAttributes.size,i,i,this.calculateElementHorizontalPosition(n),t)}),t+=this.canvas.canvasSettings.stringHeight);6===r.filter(t=>t===this.chordData.startString).length&&this.drawBare()}findBorders(){const t=this.chordData.structure.strings;let r=1,i=12;for(const n in t)t.hasOwnProperty(n)&&(r=Math.max.apply(null,t[n])>r?Math.max.apply(null,t[n]):r,i=Math.min.apply(null,t[n])<i?Math.min.apply(null,t[n]):i);return r-this.chordData.startString<2?r+1:r}calculateElementHorizontalPosition(t){const r=t-this.chordData.startString,i=this.canvas.canvasSettings.rowWidth;return this.canvas.canvasSettings.canvasWidth-r*i-.5*i}calculateCanvasSize(t){return(1+t-this.chordData.startString)*this.canvas.canvasSettings.rowWidth}drawCircle(t,r,i,n,s){const e=this.canvas.ref.ctx;e&&(e.strokeStyle=r,e.fillStyle=i,e.beginPath(),e.arc(n,s,t,0,2*Math.PI),e.stroke(),e.fill())}drawALine(t,r,i,n,s,e=0){const a=this.canvas.ref.ctx;a&&(a.strokeStyle=t,a.beginPath(),a.moveTo(r,i),a.lineTo(n,s),a.lineWidth=e||1,a.stroke())}drawBare(){const t=this.calculateElementHorizontalPosition(this.chordData.startString);this.drawALine(s.colors.circleColor[this.canvas.customAttributes.theme],t,5*this.canvas.customAttributes.size,t,this.canvas.canvasSettings.canvasHeight-5,15*this.canvas.customAttributes.size)}resolveChordReflection(){let t=`; transform: scale(${this.canvas.customAttributes.reflection.horizontal?-1:1},${this.canvas.customAttributes.reflection.vertical?-1:1})`;this.canvas.ref.canvas.style+=t}}class d{getCommonTemplete(t,r,i,n,s,e){return`\n    <div class="main-container">\n        <div class="accord-description">\n            <div class="description-element">\n                ${e?i:t}\n            </div>\n            <div class="description-element row-number-container">\n                ${e?t:i}\n                </div>\n        </div>\n        <canvas id=${r}\n            class="canvas-style"\n            width=${n}\n            height=${s}/>\n    </div> `}get unknownChordTemplate(){return"<div class='unknown-chord'>Unknown chord</div>"}get loadingTemplate(){return"<div>Loading data</div>"}}customElements.define("chord-creator",class extends HTMLElement{constructor(){super(),this.attrGetter,this.templatesHolder=new d,this.canvasSettings={reflect:{horizontal:!1,vertical:!1}},this.customAttributes={chords:[],size:null,theme:"light"},this.initAll()}initAll(){this.id=`single-chord-component-${o()}`,this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=this.templatesHolder.loadingTemplate,this.chordComponentRef=document.getElementById(this.id),this.attrGetter=new h(this.chordComponentRef),this.attrGetter.chordArray.length?(this.initAttributes(),this.shadowRoot.innerHTML=this.resolveFinalTemplate(),this.customAttributes.chords.map(t=>{const r={...this.customAttributes,reflection:this.canvasSettings.reflect};new g(this.initCanvas(t),t,r).draw()})):this.shadowRoot.innerHTML=this.templatesHolder.unknownChordTemplate+e.getUnknownChordTemplateStyleTag()}initAttributes(){this.initChords(),this.initSize(),this.initTheme(),this.initReflectAttr()}initSize(){this.customAttributes.size=this.attrGetter.size}initChords(){this.customAttributes.chords=this.attrGetter.chordArray}initReflectAttr(){this.canvasSettings.reflect=this.attrGetter.reflect}initTheme(){this.customAttributes.theme=this.attrGetter.theme}initCanvas(t){const r={canvas:{},ctx:{}};return r.canvas=this.shadowRoot.getElementById(t.componentCanvasId),r.ctx=r.canvas?r.canvas.getContext("2d"):null,r}resolveFinalTemplate(){const t=e.getChordContainerStyleTag(this.customAttributes.theme,this.customAttributes.size);let r="";return this.customAttributes.chords.map(t=>{r+=this.templatesHolder.getCommonTemplete(t.name,t.componentCanvasId,t.startString,this.canvasSettings.canvasWidth,this.canvasSettings.canvasHeight,this.canvasSettings.reflect.horizontal)}),r+t}})}]);